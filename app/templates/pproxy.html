{% extends "base.html" %}

{% block content %}
<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-header"><strong>üîß PProxy Terminal</strong></div>
            <div class="card-body">
                <div class="terminal" id="terminal">
                    <div>> –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ PProxy —Ç–µ—Ä–º–∏–Ω–∞–ª</div>
                    <div>> –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ</div>
                    <div>> –î–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã –≤–≤–µ–¥–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É...</div>
                    <div id="output"></div>
                    <div class="input-line">
                        <span>> </span>
                        <input type="text" id="command-input" style="background: transparent; border: none; color: #00ff00; outline: none; width: 80%;" autofocus>
                    </div>
                </div>
                
                <div class="mt-3">
                    <button class="btn btn-secondary" onclick="clearTerminal()">–û—á–∏—Å—Ç–∏—Ç—å</button>
                    <button class="btn btn-info" onclick="addSampleOutput()">–¢–µ—Å—Ç–æ–≤—ã–π –≤—ã–≤–æ–¥</button>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    const terminal = document.getElementById('terminal');
    const commandInput = document.getElementById('command-input');
    const output = document.getElementById('output');

    commandInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            const command = this.value;
            if (command.trim()) {
                addOutput(`> ${command}`);
                addOutput('–ö–æ–º–∞–Ω–¥–∞ –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–∞ –∏–ª–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ');
                this.value = '';
                scrollToBottom();
            }
        }
    });

    function addOutput(text) {
        const div = document.createElement('div');
        div.textContent = text;
        output.appendChild(div);
    }

    function clearTerminal() {
        output.innerHTML = '';
    }

    function addSampleOutput() {
        addOutput('> –¢–µ—Å—Ç–æ–≤—ã–π –≤—ã–≤–æ–¥');
        addOutput('–í—Ä–µ–º—è: ' + new Date().toLocaleTimeString());
        addOutput('–°—Ç–∞—Ç—É—Å: –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ');
        scrollToBottom();
    }

    function scrollToBottom() {
        terminal.scrollTop = terminal.scrollHeight;
    }

    // –ê–≤—Ç–æ-—Ñ–æ–∫—É—Å –Ω–∞ –ø–æ–ª–µ –≤–≤–æ–¥–∞
    commandInput.focus();
</script>
{% endblock %}